<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YOU HAVE BEEN CHOSEN</title>
    <style>
        :root {
            --neon-blue: #00f2ff;
            --blood-red: #ff4757;
        }
        body { margin: 0; background: #000; color: white; font-family: 'Courier New', Courier, monospace; overflow: hidden; touch-action: none; }
        canvas { display: block; width: 100vw; height: 100vh; }

        /* Title Glow */
        #game-title {
            position: absolute; top: 10%; width: 100%; text-align: center;
            font-size: 1.5rem; letter-spacing: 5px; color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue); pointer-events: none;
            text-transform: uppercase; animation: flicker 3s infinite;
        }

        #ui { position: absolute; top: 18%; width: 100%; text-align: center; pointer-events: none; }
        #score { font-size: 40px; font-weight: bold; opacity: 0.7; }

        /* Game Over / Invite Screen */
        #overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9); display: none;
            flex-direction: column; justify-content: center; align-items: center;
            padding: 20px; box-sizing: border-box; z-index: 20; text-align: center;
        }

        .invite-text { 
            color: var(--blood-red); font-size: 1.2rem; margin-bottom: 20px;
            line-height: 1.6; max-width: 400px; text-shadow: 0 0 5px black;
        }

        .glitch { font-weight: bold; text-transform: uppercase; font-size: 1.4rem; display: block; margin-top: 10px; }

        .btn-group { display: flex; flex-direction: column; gap: 10px; width: 80%; max-width: 300px; }
        button { 
            background: transparent; border: 1px solid var(--neon-blue); color: var(--neon-blue);
            padding: 15px; cursor: pointer; font-family: inherit; font-weight: bold;
            transition: 0.3s;
        }
        button:hover { background: var(--neon-blue); color: black; }

        #copy-btn { border-color: #fff; color: #fff; font-size: 0.8rem; }

        /* Jumpscare */
        #jumpscare {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: black; z-index: 100; display: none;
        }
        #jumpscare img { width: 100%; height: 100%; object-fit: cover; }

        @keyframes flicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% { opacity: 1; }
            20%, 24%, 55% { opacity: 0.3; }
        }
    </style>
</head>
<body>

    <div id="game-title">YOU HAVE BEEN CHOSEN</div>
    
    <div id="ui">
        <div id="score">0</div>
    </div>

    <div id="overlay">
        <div class="invite-text">
            YOUR SOUL IS TRAPPED... BUT THERE IS A WAY OUT.<br>
            <span class="glitch">VISIT OUR ESCAPE ROOM AT JRN 104</span><br>
            WE'RE OPEN FROM FEB 11-14 | 8 AM
        </div>
        <div class="btn-group">
            <button onclick="resetGame()">RETRY THE ORBIT</button>
            <button id="copy-btn" onclick="copyLink()">TRICK A FRIEND (COPY LINK)</button>
        </div>
    </div>

    <div id="jumpscare">
        <img id="scare-img" src="">
        <audio id="scream-snd"></audio>
    </div>

    <canvas id="game"></canvas>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const overlay = document.getElementById('overlay');

    // SCARY ASSETS - Add your URLs here
    const IMAGES = ["https://via.placeholder.com/800x1200/000000/ff0000?text=RUN", "https://via.placeholder.com/800x1200/220000/ffffff?text=I+SEE+YOU"];
    const SOUNDS = ["https://www.soundjay.com/human/sounds/scream-01.mp3"];

    let width, height, centerX, centerY, dpr;
    let score = 0, gameActive = true;
    const orbits = [70, 120, 170];
    let player = { orbitIdx: 0, angle: 0, speed: 0.025, size: 8 };
    let obstacles = [], stars = [], lastObsTime = 0;

    function resize() {
        dpr = window.devicePixelRatio || 1;
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width * dpr;
        canvas.height = height * dpr;
        ctx.scale(dpr, dpr);
        centerX = width / 2;
        centerY = height / 2;
    }

    function spawnObstacle() {
        const orbitIdx = Math.floor(Math.random() * orbits.length);
        const speed = (0.01 + Math.random() * 0.01) * (Math.random() > 0.5 ? 1 : -1);
        obstacles.push({ orbitIdx, angle: Math.random() * Math.PI * 2, speed, width: 0.6 });
    }

    function gameOver() {
        gameActive = false;
        if (Math.random() < 0.3) { // 30% chance
            triggerScare();
        } else {
            showOverlay();
        }
    }

    function triggerScare() {
        const js = document.getElementById('jumpscare');
        const img = document.getElementById('scare-img');
        const snd = document.getElementById('scream-snd');
        
        img.src = IMAGES[Math.floor(Math.random() * IMAGES.length)];
        snd.src = SOUNDS[Math.floor(Math.random() * SOUNDS.length)];
        
        js.style.display = 'block';
        snd.play().catch(() => {});
        
        setTimeout(() => {
            js.style.display = 'none';
            showOverlay();
        }, 1200);
    }

    function showOverlay() {
        overlay.style.display = 'flex';
    }

    function resetGame() {
        score = 0; obstacles = []; gameActive = true;
        overlay.style.display = 'none';
    }

    function copyLink() {
        navigator.clipboard.writeText(window.location.href);
        const btn = document.getElementById('copy-btn');
        btn.innerText = "LINK COPIED! SPREAD THE CURSE...";
        setTimeout(() => btn.innerText = "TRICK A FRIEND (COPY LINK)", 2000);
    }

    function update() {
        if (!gameActive) return;
        player.angle += player.speed;
        obstacles.forEach(o => o.angle += o.speed);
        if (Date.now() - lastObsTime > 1800 - Math.min(score * 5, 1000)) {
            spawnObstacle(); lastObsTime = Date.now();
        }
        obstacles.forEach(obs => {
            if (obs.orbitIdx === player.orbitIdx) {
                let diff = Math.abs((player.angle % (Math.PI*2)) - (obs.angle % (Math.PI*2)));
                if (diff < obs.width || diff > (Math.PI*2 - obs.width)) gameOver();
            }
        });
        score += 0.05;
        scoreEl.innerText = Math.floor(score);
    }

    function draw() {
        ctx.fillStyle = '#050505';
        ctx.fillRect(0, 0, width, height);
        orbits.forEach(r => {
            ctx.beginPath(); ctx.strokeStyle = '#1a1a1a';
            ctx.arc(centerX, centerY, r, 0, Math.PI*2); ctx.stroke();
        });
        obstacles.forEach(o => {
            ctx.strokeStyle = '#ff4757'; ctx.lineWidth = 12; ctx.lineCap = 'round';
            ctx.beginPath(); ctx.arc(centerX, centerY, orbits[o.orbitIdx], o.angle, o.angle + o.width);
            ctx.stroke();
        });
        const px = centerX + Math.cos(player.angle) * orbits[player.orbitIdx];
        const py = centerY + Math.sin(player.angle) * orbits[player.orbitIdx];
        ctx.fillStyle = '#00f2ff'; ctx.shadowBlur = 15; ctx.shadowColor = '#00f2ff';
        ctx.beginPath(); ctx.arc(px, py, 8, 0, Math.PI*2); ctx.fill();
        ctx.shadowBlur = 0;
    }

    function loop() { update(); draw(); requestAnimationFrame(loop); }

    window.addEventListener('mousedown', () => { if(gameActive) player.orbitIdx = (player.orbitIdx + 1) % orbits.length; });
    window.addEventListener('touchstart', (e) => { e.preventDefault(); if(gameActive) player.orbitIdx = (player.orbitIdx + 1) % orbits.length; });
    window.addEventListener('resize', resize);

    resize();
    loop();
</script>
</body>
</html>
